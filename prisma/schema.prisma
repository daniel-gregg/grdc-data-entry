// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// All people accessing any functionality of Affine have a user account
// Users are only the human interface to Affine reporting and data entry
// So, Users without an organisation can only view reports that they are given access to
// All other functionality is nested within an organisation:
//   * requesting module completion
//   * adding suppliers
//   * creating reports
//   * requesting viewers for reports
//   * etc. 
// Users must be a member of an organisation to undertake these activities

model User {
  id String  @id @unique @default(uuid())
  createdAt DateTime? @default(now())
  updatedAt DateTime? @default(now())
  email String @unique

}

// TOTP authorisations table
model Totp {
  id String   @id @default(uuid())
  createdAt DateTime? @default(now())
  hash String @unique
  attempts Int @default(0)
  active Boolean @default(true)
  expiresAt DateTime? @default(dbgenerated("now() + interval '15 minutes'"))
}
